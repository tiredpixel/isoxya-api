#!/usr/bin/env bash
set -Eeuo pipefail

r=docker.io/isoxya/isoxya-api
#-------------------------------------------------------------------------------
# use BuildKit, sharing layers between `docker compose build` and `docker build`
export DOCKER_BUILDKIT=1

docker build \
    --build-arg GIT_DESCRIBE="$(git describe)" \
    --tag "$r" \
    .

docker push "$r"
